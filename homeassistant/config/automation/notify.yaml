---
- alias: "Notify: Portfolio daily"

  trigger:
    - platform: time
      at: input_datetime.notify_portfolio_daily

  condition:
    condition: state
    entity_id: binary_sensor.workday
    state: "on"

  action:
    - service: python_script.update_portfolio_state
    - service: python_script.notify_portfolio_state
      data:
        report: stock
        timespan: day

- alias: "Notify: Portfolio weekly"

  trigger:
    - platform: time
      at: input_datetime.notify_portfolio_weekly

  condition:
    condition: time
    weekday:
      - sat

  action:
    - service: python_script.update_portfolio_state
    - service: python_script.notify_portfolio_state
      data:
        report: stock
        timespan: week

- alias: "Notify: Portfolio dividend"

  trigger:
    - platform: time
      at: input_datetime.notify_portfolio_dividend

  condition:
    condition: state
    entity_id: binary_sensor.workday
    state: "on"

  action:
    - service: python_script.notify_portfolio_dividend
      data:
        report: today

- alias: "Notify: Ping disconnected"

  trigger:
    platform: state
    entity_id: group.ping
    from: "on"
    to: "off"

  action:
    service: python_script.notify_ping_state
